# Правила ведения документации проекта FEONT

**Версия:** 1.0.0  
**Последнее обновление:** 2025-11-30  
**Связанные документы:**
- `docs/project/project-docs.json` - основная документация проекта
- `docs/development/project-development.json` - планирование разработки
- `docs/journal/project-journal.json` - журнал разработки

---

## Структура проекта

### Расположение кода и документации

**Важно:** Весь исходный код приложения содержится в папке `code/`, расположенной в корне проекта, рядом с папкой `docs/`.

```
feont/
├── code/                    # Исходный код приложения
│   ├── backend/            # Backend код (если применимо)
│   ├── frontend/           # Frontend код (Vue.js + Quasar)
│   ├── docker/             # Docker конфигурации
│   └── ...
├── docs/                    # Документация проекта
│   ├── project/            # Основная документация проекта
│   ├── development/        # Планирование разработки
│   └── journal/            # Журнал разработки
├── .cursorrules            # Правила для AI-ассистента
└── ...
```

### Структура документации

```
docs/
├── project/                         # Основная документация проекта
│   ├── project-docs.json            # Центральная документация
│   ├── project-docs-json-rules.md   # Правила ведения project-docs.json
│   └── extensions/                  # Расширения документации
│       ├── modules/                 # Структура модулей
│       ├── ontology/                # Описание онтологии
│       ├── shacl/                   # SHACL shapes
│       ├── sparql/                  # SPARQL запросы
│       ├── visualization/           # Конфигурации визуализации
│       └── deployment/              # Конфигурация развёртывания
├── development/                     # Планирование разработки
│   ├── project-development.json     # Планирование задач
│   ├── project-development-json-rules.md  # Правила ведения
│   └── notes/                       # Заметки и рабочие материалы
│       ├── chats/                   # Планы и резюме чатов
│       │   ├── chat-plan/           # Планы работы
│       │   └── chat-resume/         # Резюме выполненных работ
│       └── docs-preliminary/        # Предварительные документы
│                                   # ВСЕ неформализованные документы здесь
└── journal/                         # Журнал разработки
    ├── project-journal.json         # Журнал сессий
    └── project-journal-json-rules.md # Правила ведения
```

**Важно:** Не создавайте файлы документации в корне папки `docs/`. Все документы должны быть структурированы согласно этой структуре.

---

## Общие принципы

### 1. Централизация информации

Вся основная информация о проекте хранится в JSON файлах:
- **`project-docs.json`** - архитектура, технологический стек, онтология
- **`project-development.json`** - задачи и структура разработки
- **`project-journal.json`** - история изменений и сессии работы

### 2. Связность документов

Все документы связаны через систему ссылок:
- Задачи ссылаются на документацию (`projectDocsRefs`)
- Сессии журнала ссылаются на задачи (`developmentTasks`)
- Документация ссылается на задачи и журнал

### 3. Версионирование

- Все JSON файлы имеют версии в метаданных
- При значительных изменениях версия увеличивается
- История изменений фиксируется в `project-journal.json`

### 4. Актуальность

- Обновлять `lastUpdated` при любых изменениях
- Регулярно проверять актуальность ссылок
- Документировать устаревшие подходы

---

## Связи между файлами

### Типы связей

1. **projectDocsRefs** - ссылки из задач на разделы документации
2. **developmentTasks** - ссылки из журнала на задачи
3. **journalRefs** - ссылки из документации на записи журнала

### Примеры связей

**В project-development.json:**
```json
{
  "task-0001": {
    "projectDocsRefs": [
      "project:architecture:backend",
      "project:ontology"
    ]
  }
}
```

**В project-journal.json:**
```json
{
  "sessions": [
    {
      "developmentTasks": ["task-0001", "task-0002"],
      "journalRefs": []
    }
  ]
}
```

---

## Процесс добавления новых артефактов

### 1. Создание новой задачи

1. Добавить задачу в `project-development.json`:
   - Уникальный ID (формат: `task-XXXX`)
   - Описание и критерии завершения
   - Связи с документацией

2. Добавить задачу в структуру (`structure.trees`)
   - Указать иерархию задач
   - Установить зависимости

3. Зафиксировать создание в `project-journal.json`

### 2. Изменение архитектуры

1. Обновить `project-docs.json`:
   - Соответствующий раздел
   - Обновить `lastUpdated`

2. Создать запись в журнале разработки

3. Обновить связанные задачи (если есть)

### 3. Добавление нового модуля

1. Описать модуль в `project-docs.json` или расширениях
2. Создать задачу в `project-development.json`
3. Задокументировать в журнале

---

## Контроль целостности ссылок

### Правила

1. **Все ссылки должны быть валидными:**
   - ID задач существуют в `project-development.json`
   - Разделы документации существуют в `project-docs.json`
   - Записи журнала существуют в `project-journal.json`

2. **Обратные ссылки:**
   - При ссылке на задачу - задача может ссылаться обратно
   - При ссылке на раздел документации - раздел может упоминать задачу

3. **Проверка при удалении:**
   - Перед удалением задачи/раздела - проверить все ссылки
   - Обновить или удалить связанные ссылки

### Автоматическая проверка (рекомендуется)

Периодически проверять целостность ссылок:
- Все ID задач существуют
- Все разделы документации существуют
- Нет циклических зависимостей

---

## Специфика для графа знаний

### Документирование онтологии

1. **Изменения онтологии фиксируются:**
   - В `project-journal.json` в разделе `ontology_changes`
   - В Named Graph `urn:ontology:history`
   - В `project-docs.json` обновляется версия онтологии

2. **Версионирование:**
   - Версия онтологии в `project-docs.json` → `ontology.version`
   - История изменений в журнале
   - Связь изменений с задачами

### Документирование SHACL shapes

1. **Хранение shapes:**
   - В Named Graph `urn:shacl:shapes`
   - В расширении `docs/project/extensions/shacl/shapes-catalog.json`

2. **Версионирование:**
   - Связь shapes с версией онтологии
   - История изменений в журнале

### Документирование SPARQL запросов

1. **Сохранение запросов:**
   - В расширении `docs/project/extensions/sparql/queries-library.json`
   - С метаданными: ID, название, описание, дата создания

2. **Категоризация:**
   - Аналитические запросы
   - Запросы для валидации
   - Запросы для визуализации

---

## Планы и резюме чатов

### Структура планов

Планы создаются в `docs/development/notes/chats/chat-plan/`:
- Формат имени: `chat-plan-YY-MMDD.md`
- Связь с задачами через `developmentTasks`
- Обновление статусов по ходу работы

### Структура резюме

Резюме создаются в `docs/development/notes/chats/chat-resume/`:
- Формат имени: `chat-resume-YY-MMDD.md`
- Связь с планами через ссылки
- Фиксация созданных/измененных артефактов

### Связь с основной документацией

- Планы и резюме связаны с задачами в `project-development.json`
- Изменения фиксируются в `project-journal.json`
- Важные решения документируются в `project-docs.json`

---

## Предварительные документы

### Назначение

Предварительные документы в `docs/development/notes/docs-preliminary/`:
- Предложения по архитектуре
- Детальные планы реализации
- Расширенные описания компонентов
- Стратегии и рекомендации
- Руководства по разработке и развёртыванию
- Любые неформализованные документы проекта

### Расположение

**Важно:** Все неформализованные документы должны располагаться в папке предварительных документов (`docs/development/notes/docs-preliminary/`). 

**НЕ создавайте документы в корне папки `docs/`** - вся документация должна быть структурирована:
- JSON файлы в соответствующих папках (`project/`, `development/`, `journal/`)
- Правила и формализованная документация в соответствующих папках
- Предварительные документы, руководства и заметки - в `docs-preliminary/`

### Формат имен

`YY-MMDD-название-документа.md`

Примеры:
- `25-1130-ontology-structure-proposal.md`
- `25-1201-sparql-queries-strategy.md`
- `25-1130-deployment-and-development-guide.md`

### Формат документа

Предварительные документы должны начинаться с метаданных:
```markdown
**Дата:** YYYY-MM-DD  
**Автор:** Имя  
**Статус:** active | proposal | draft | deprecated  
**Тип:** proposal | guide | strategy | description  
**Связанные документы:** [ссылки на связанные документы]
```

### Связь с основной документацией

- Предварительные документы ссылаются на `project-docs.json`
- Могут детализировать задачи из `project-development.json`
- Связываются с планами и резюме чатов

---

## Обновление документации

### Когда обновлять

1. **При изменении архитектуры:**
   - Обновить `project-docs.json`
   - Зафиксировать в журнале

2. **При создании/завершении задачи:**
   - Обновить `project-development.json`
   - Обновить статус в структуре
   - Зафиксировать в журнале

3. **При изменении онтологии:**
   - Обновить `project-docs.json` (версия онтологии)
   - Зафиксировать в журнале (ontology_changes)
   - Обновить Named Graph `urn:ontology:history`

### Как обновлять

1. Открыть соответствующий JSON файл
2. Внести изменения
3. Обновить `lastUpdated`
4. Зафиксировать в журнале разработки
5. Проверить целостность ссылок

---

## Работа с исходным кодом

### Структура кода

Весь исходный код приложения находится в папке `code/`:
- **`code/backend/`** - Backend код (если применимо)
- **`code/frontend/`** - Frontend код (Vue.js + Quasar)
- **`code/docker/`** - Docker конфигурации
- **`code/data/`** - Данные (если применимо, исключить из git)

### Связь кода с документацией

1. **Модули описываются:**
   - В `project-docs.json` или расширениях `modules/`
   - Связь через пути к файлам

2. **Изменения кода:**
   - Фиксируются в журнале разработки
   - Связываются с задачами

3. **Конфигурации:**
   - Docker конфигурации в `code/docker/`
   - Описание в `project-docs.json` → `infrastructure.deployment`

---

## Правила для AI-ассистента

AI-ассистент должен следовать правилам из `.cursorrules`:
- Приоритетное использование Desktop Commander MCP
- Правила работы с RDF/SHACL/SPARQL
- Правила разработки (Vue 3 + Quasar)
- Правила документации (этот файл)

---

## Связанные документы

- [`docs/project/project-docs.json`](project/project-docs.json) - основная документация
- [`docs/project/project-docs-json-rules.md`](project/project-docs-json-rules.md) - правила ведения project-docs.json
- [`docs/development/project-development.json`](development/project-development.json) - планирование
- [`docs/development/project-development-json-rules.md`](development/project-development-json-rules.md) - правила ведения project-development.json
- [`docs/journal/project-journal.json`](journal/project-journal.json) - журнал
- [`docs/journal/project-journal-json-rules.md`](journal/project-journal-json-rules.md) - правила ведения project-journal.json

---

**Примечание:** При работе с документацией всегда помните о связности документов и актуальности информации. Все изменения должны быть задокументированы в журнале разработки.

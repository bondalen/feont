**Дата:** 2025-11-30  
**Автор:** Александр  
**Связанные задачи:** (будут созданы в project-development.json)  
**Связанный план:** [chat-plan-25-1130-deployment.md](./chat-plan-25-1130-deployment.md)

## Контекст

Проект FEONT находится на стадии разработки. Структура проекта создана, backend и frontend код реализован, скрипты автоматизации подготовлены. Согласно анализу, приложение не готово к запуску, но все необходимое для сборки и запуска присутствует.

**Текущее состояние:**
- ✅ Структура проекта создана
- ✅ Backend код реализован (7 Java классов)
- ✅ Frontend код реализован (8 Vue компонентов)
- ✅ Конфигурационные файлы на месте
- ✅ Скрипты автоматизации созданы
- ❌ Зависимости frontend не установлены (нет node_modules)
- ❌ Frontend не собран (нет dist/spa/)
- ❌ Backend не собран (нет JAR файла)

**Цель:** Обеспечить запуск приложения FEONT локально и проверить его работу в браузере. Убедиться, что все компоненты (backend, frontend, SPARQL endpoints) функционируют корректно.

---

## Структурный план (№ 07)

- ✅ 07.0 Этап 1 ― Подготовка окружения и проверка инструментов
  - ✅ 07.1 Проверить наличие необходимых инструментов
    - ✅ 07.1.1 Проверить Java 21
      - Команда: `java -version`
      - Результат: ✅ Java 21.0.8 (OpenJDK Runtime Environment Temurin-21.0.8+9)
    - ✅ 07.1.2 Проверить Maven
      - Команда: `mvn -version`
      - Результат: ✅ Maven 3.8.7 (Java version: 21.0.8)
    - ✅ 07.1.3 Проверить Node.js и npm
      - Команды: `node -v`, `npm -v`
      - Результат: ✅ Node.js v20.19.5, npm 10.8.2 (требования: >= 18, >= 9)
    - ✅ 07.1.4 Проверить доступность порта 8083
      - Команда: `lsof -i :8083` или `netstat -tuln | grep 8083`
      - Результат: ✅ Порт 8083 свободен
  - ✅ 07.2 Проверить структуру проекта
    - ✅ 07.2.1 Проверить наличие backend кода
      - Путь: `code/backend/src/main/java/io/github/bondalen/feont/`
      - Результат: ✅ Найдено 8 Java классов:
        - FeontApplication.java
        - config/CorsConfig.java, FusekiConfig.java, WebConfig.java
        - controller/HealthController.java, SparqlController.java
        - service/DatasetInitializationService.java, SparqlService.java
    - ✅ 07.2.2 Проверить наличие frontend кода
      - Путь: `code/frontend/src/`
      - Результат: ✅ Найдено 8 Vue компонентов, структура проекта полная
    - ✅ 07.2.3 Проверить наличие скриптов сборки
      - Путь: `code/scripts/build.sh`
      - Результат: ✅ Найдено 9 скриптов, все имеют права на выполнение (build.sh, test-local.sh и др.)

- ✅ 08.0 Этап 2 ― Установка зависимостей и сборка Frontend
  - ✅ 08.1 Установить зависимости frontend
    - ✅ 08.1.1 Перейти в директорию frontend
      - `cd code/frontend`
      - Результат: ✅ Переход выполнен
    - ✅ 08.1.2 Установить npm зависимости
      - Команда: `npm install`
      - Результат: ✅ Зависимости установлены (533 пакета, 0 уязвимостей)
      - Размер node_modules: 332MB
    - ✅ 08.1.3 Проверить установленные зависимости
      - Команда: `npm list --depth=0`
      - Результат: ✅ Все основные зависимости установлены (Vue 3.5.25, Quasar 2.18.6, Cytoscape, rdflib и др.)
  - ✅ 08.2 Собрать frontend
    - ✅ 08.2.1 Выполнить сборку Quasar
      - Команда: `npm run build:spa`
      - Результат: ✅ Сборка успешна (5054ms)
      - Исправлены проблемы: конвертирован quasar.config.js в ESM формат, исправлен index.html
      - Создана папка `dist/spa/` с собранными файлами
    - ✅ 08.2.2 Проверить результат сборки
      - Результат: ✅ Найдено 30 файлов в `dist/spa/`
      - ✅ `index.html` найден
      - ✅ Статические ресурсы созданы (19 JS файлов, 2 CSS файла)
      - Общий размер: JS 783.02 KB, CSS 195.59 KB
    - ✅ 08.2.3 Проверить конфигурацию окружения
      - Результат: ✅ `.env.development` найден (SPARQL endpoint: http://localhost:8083/ds/sparql)
      - ✅ `.env.production` найден (SPARQL endpoint: /ds/sparql)
      - Конфигурация корректна

- ⏳ 09.0 Этап 3 ― Сборка Backend
  - ⏳ 09.1 Подготовить backend к сборке
    - ⏳ 09.1.1 Проверить наличие frontend статики
      - Убедиться, что `frontend/dist/spa/` существует
      - Если нет, вернуться к этапу 08.0
    - ⏳ 09.1.2 Проверить структуру backend
      - Проверить наличие `pom.xml`
      - Проверить наличие `src/main/resources/application.yml`
  - ⏳ 09.2 Собрать backend (вариант 1: через скрипт)
    - ⏳ 09.2.1 Использовать скрипт автоматической сборки
      - Команда: `cd code && ./scripts/build.sh`
      - Скрипт автоматически соберёт frontend и backend
    - ⏳ 09.2.2 Проверить результат сборки
      - Проверить наличие JAR файла: `backend/target/feont-1.0.0-SNAPSHOT.jar`
      - Проверить размер JAR файла (ожидается ~50-100MB)
      - Проверить, что frontend статика скопирована в `backend/src/main/resources/static/`
  - ⏳ 09.3 Собрать backend (вариант 2: вручную, если скрипт не работает)
    - ⏳ 09.3.1 Скопировать frontend статику в backend
      - Команда: `cp -r frontend/dist/spa/* backend/src/main/resources/static/`
    - ⏳ 09.3.2 Собрать JAR через Maven
      - Команда: `cd backend && mvn clean package -DskipTests`
      - Проверить успешность сборки
    - ⏳ 09.3.3 Проверить результат
      - Проверить наличие JAR файла в `target/`
      - Проверить размер и содержимое

- ⏳ 10.0 Этап 4 ― Запуск приложения
  - ⏳ 10.1 Подготовить окружение для запуска
    - ⏳ 10.1.1 Создать директорию для данных TDB2
      - Команда: `mkdir -p code/data/tdb2`
      - Путь будет использован для dev профиля
    - ⏳ 10.1.2 Проверить доступность порта 8083
      - Если порт занят, остановить процесс или выбрать другой порт
  - ⏳ 10.2 Запустить приложение (вариант 1: через скрипт)
    - ⏳ 10.2.1 Использовать скрипт тестирования
      - Команда: `cd code && ./scripts/test-local.sh`
      - Скрипт автоматически запустит приложение и проверит endpoints
    - ⏳ 10.2.2 Проверить запуск
      - Дождаться сообщения о успешном запуске
      - Проверить логи на наличие ошибок
  - ⏳ 10.3 Запустить приложение (вариант 2: вручную)
    - ⏳ 10.3.1 Запустить JAR файл
      - Команда: `java -jar backend/target/feont-1.0.0-SNAPSHOT.jar --spring.profiles.active=dev --feont.tdb2.path=./data/tdb2 --server.port=8083`
    - ⏳ 10.3.2 Проверить запуск
      - Дождаться сообщения "Started FeontApplication"
      - Проверить логи на наличие ошибок
      - Убедиться, что Named Graphs инициализированы

- ⏳ 11.0 Этап 5 ― Проверка работы в браузере
  - ⏳ 11.1 Проверить доступность приложения
    - ⏳ 11.1.1 Открыть главную страницу
      - URL: `http://localhost:8083/`
      - Ожидаемый результат: загружается frontend приложение
      - Проверить наличие элементов интерфейса (навигация, контент)
    - ⏳ 11.1.2 Проверить консоль браузера
      - Открыть Developer Tools (F12)
      - Проверить отсутствие критических ошибок JavaScript
      - Проверить загрузку ресурсов (JS, CSS файлы)
  - ⏳ 11.2 Проверить навигацию по страницам
    - ⏳ 11.2.1 Проверить главную страницу (IndexPage)
      - URL: `http://localhost:8083/`
      - Проверить отображение контента
    - ⏳ 11.2.2 Проверить страницу SPARQL (SparqlPage)
      - URL: `http://localhost:8083/sparql` (или через навигацию)
      - Проверить наличие формы для запросов
      - Проверить отображение интерфейса
    - ⏳ 11.2.3 Проверить страницу графа (GraphPage)
      - URL: `http://localhost:8083/graph` (или через навигацию)
      - Проверить загрузку компонента визуализации
    - ⏳ 11.2.4 Проверить страницу онтологии (OntologyPage)
      - URL: `http://localhost:8083/ontology` (или через навигацию)
      - Проверить отображение страницы
  - ⏳ 11.3 Проверить работу SPARQL endpoints через браузер
    - ⏳ 11.3.1 Проверить health check endpoint
      - URL: `http://localhost:8083/health`
      - Ожидаемый результат: JSON ответ со статусом
    - ⏳ 11.3.2 Проверить SPARQL endpoint (если доступен через браузер)
      - URL: `http://localhost:8083/ds/sparql`
      - Проверить доступность (может требовать POST запрос)

- ⏳ 12.0 Этап 6 ― Тестирование функциональности
  - ⏳ 12.1 Тестирование SPARQL endpoints через curl
    - ⏳ 12.1.1 Проверить health check
      - Команда: `curl http://localhost:8083/health`
      - Ожидаемый результат: JSON ответ
    - ⏳ 12.1.2 Проверить SPARQL query endpoint
      - Команда: `curl -X POST http://localhost:8083/ds/sparql -H "Content-Type: application/sparql-query" -d "SELECT * WHERE { ?s ?p ?o } LIMIT 10"`
      - Ожидаемый результат: SPARQL результаты (может быть пустым, если данных нет)
    - ⏳ 12.1.3 Проверить инициализацию Named Graphs
      - Выполнить SPARQL запрос для проверки наличия Named Graphs
      - Проверить, что все 5 Named Graphs созданы: urn:ontology, urn:data, urn:shacl:shapes, urn:ontology:history, urn:validation:results
  - ⏳ 12.2 Тестирование frontend функциональности
    - ⏳ 12.2.1 Протестировать SPARQL запрос через интерфейс
      - Открыть страницу SPARQL
      - Ввести простой запрос: `SELECT * WHERE { ?s ?p ?o } LIMIT 10`
      - Выполнить запрос
      - Проверить отображение результатов
    - ⏳ 12.2.2 Проверить работу визуализации графа (если реализована)
      - Открыть страницу графа
      - Проверить загрузку Cytoscape.js
      - Проверить отображение графа (может быть пустым, если данных нет)
  - ⏳ 12.3 Проверить работу с данными
    - ⏳ 12.3.1 Добавить тестовые данные через SPARQL Update
      - Команда: `curl -X POST http://localhost:8083/ds/update -H "Content-Type: application/sparql-update" -d "INSERT DATA { GRAPH <urn:data> { <http://example.org/test> <http://example.org/name> \"Test\" } }"`
      - Проверить успешность операции
    - ⏳ 12.3.2 Проверить чтение данных
      - Выполнить SELECT запрос для проверки добавленных данных
      - Проверить отображение в frontend (если реализовано)

- ⏳ 13.0 Этап 7 ― Документирование результатов
  - ⏳ 13.1 Зафиксировать результаты запуска
    - ⏳ 13.1.1 Задокументировать успешные шаги
      - Какие этапы выполнены успешно
      - Какие проблемы возникли и как решены
    - ⏳ 13.1.2 Задокументировать обнаруженные проблемы
      - Список проблем (если есть)
      - Предложения по решению
    - ⏳ 13.1.3 Задокументировать рекомендации
      - Рекомендации по дальнейшей работе
      - Предложения по улучшению
  - ⏳ 13.2 Обновить документацию проекта
    - ⏳ 13.2.1 Обновить project-development.json
      - Добавить задачи для этого плана (если нужно)
      - Обновить статусы существующих задач
    - ⏳ 13.2.2 Обновить project-journal.json
      - Добавить запись о сессии запуска
      - Задокументировать результаты
    - ⏳ 13.2.3 Создать резюме чата
      - Создать файл `chat-resume-25-1130-launch.md`
      - Задокументировать все выполненные шаги
      - Зафиксировать созданные/изменённые артефакты

---

## Контрольные точки

- K1 ― Окружение подготовлено, инструменты проверены (закрывает блок 07.0) — ✅ выполнено
  - Критерии: все инструменты установлены и доступны, структура проекта проверена, порт 8083 свободен
  - Результат: ✅ Все проверки пройдены успешно

- K2 ― Frontend собран и готов к использованию (закрывает блок 08.0) — ✅ выполнено
  - Критерии: зависимости установлены, frontend собран в `dist/spa/`, файлы проверены
  - Результат: ✅ Все критерии выполнены, сборка успешна

- K3 ― Backend собран в JAR файл (закрывает блок 09.0) — ⏳ планируется
  - Критерии: JAR файл создан, frontend статика включена, размер соответствует ожиданиям

- K4 ― Приложение запущено и доступно (закрывает блок 10.0) — ⏳ планируется
  - Критерии: приложение запущено без ошибок, доступно на порту 8083, Named Graphs инициализированы

- K5 ― Приложение проверено в браузере (закрывает блок 11.0) — ⏳ планируется
  - Критерии: frontend загружается, навигация работает, нет критических ошибок в консоли

- K6 ― Функциональность протестирована (закрывает блок 12.0) — ⏳ планируется
  - Критерии: SPARQL endpoints работают, frontend функциональность проверена, работа с данными протестирована

- K7 ― Результаты задокументированы (закрывает блок 13.0) — ⏳ планируется
  - Критерии: резюме чата создано, документация обновлена, проблемы и рекомендации зафиксированы

---

## Статус плана

- ✅ **Этап 1 (07.0)** — выполнен
  - ✅ Проверка окружения (07.1, 07.2) — выполнено
- ✅ **Этап 2 (08.0)** — выполнен
  - ✅ Установка зависимостей и сборка Frontend (08.1, 08.2) — выполнено
- ⏳ **Этап 3 (09.0)** — планируется
  - ⏳ Сборка Backend (09.1, 09.2, 09.3) — планируется
- ⏳ **Этап 4 (10.0)** — планируется
  - ⏳ Запуск приложения (10.1, 10.2, 10.3) — планируется
- ⏳ **Этап 5 (11.0)** — планируется
  - ⏳ Проверка в браузере (11.1, 11.2, 11.3) — планируется
- ⏳ **Этап 6 (12.0)** — планируется
  - ⏳ Тестирование функциональности (12.1, 12.2, 12.3) — планируется
- ⏳ **Этап 7 (13.0)** — планируется
  - ⏳ Документирование результатов (13.1, 13.2) — планируется

---

## Предложения по следующим шагам

**После успешного запуска:**
1. Доработать функциональность frontend (визуализация графов, редактор онтологии)
2. Добавить тестовые данные для демонстрации работы
3. Оптимизировать производительность
4. Подготовить к развёртыванию на сервере

**Если возникнут проблемы:**
1. Задокументировать все ошибки
2. Определить причину проблем
3. Создать задачи для исправления
4. При необходимости вернуться к предыдущим этапам

**Рекомендации:**
- Начинать с проверки окружения (этап 1)
- Использовать скрипты автоматизации, если они работают
- Проверять каждый этап перед переходом к следующему
- Фиксировать все проблемы и их решения

---

## Связанные документы

- [chat-plan-25-1130-deployment.md](./chat-plan-25-1130-deployment.md) - план развёртывания
- [project-docs.json](../../../project/project-docs.json) - документация проекта
- [project-development.json](../../project-development.json) - планирование задач
- [25-1130-deployment-and-development-guide.md](../../docs-preliminary/25-1130-deployment-and-development-guide.md) - руководство по развёртыванию

---

## Примечания

**Важные замечания:**
- Если скрипты автоматизации не работают, можно выполнить шаги вручную
- При проблемах с портом 8083 можно использовать другой порт (изменить в application.yml или через параметры запуска)
- Для разработки frontend можно использовать `npm run dev` для hot-reload
- Backend можно запускать через IDE (IntelliJ IDEA, Eclipse) для отладки

**Известные ограничения:**
- Визуализация графов может требовать доработки парсинга RDF
- Онтология страница может иметь базовую структуру
- SHACL валидация может быть не интегрирована в UI

**Процесс обновления:**
- После изменений в коде нужно пересобрать проект
- Frontend изменения требуют пересборки и копирования в backend
- Backend изменения требуют пересборки JAR файла

---

